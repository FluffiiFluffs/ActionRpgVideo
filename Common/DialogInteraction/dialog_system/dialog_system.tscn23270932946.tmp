[gd_scene load_steps=14 format=3 uid="uid://r7hkl52qomhx"]

[ext_resource type="Script" uid="uid://cjy5ghytpjvqw" path="res://Common/DialogInteraction/dialog_system/dialog_system.gd" id="1_2ocof"]
[ext_resource type="FontFile" uid="uid://b8pjrx1k5m76o" path="res://ASSETS/FONTS/PixelOperator/PixelOperatorMono8-Bold.ttf" id="3_w6a2r"]
[ext_resource type="Texture2D" uid="uid://dduirdxh2jra6" path="res://ASSETS/HUD/text-bubble.png" id="4_n0ird"]
[ext_resource type="FontFile" uid="uid://d2pblpyko8tdl" path="res://ASSETS/FONTS/PixelOperator/PixelOperatorMono8.ttf" id="5_euafu"]
[ext_resource type="FontFile" uid="uid://dvkdxpwvqxvk5" path="res://ASSETS/FONTS/PixelOperator/PixelOperator.ttf" id="6_0uvkt"]

[sub_resource type="Gradient" id="Gradient_7r5wx"]
offsets = PackedFloat32Array(0, 0.88536584)
colors = PackedColorArray(0, 0, 0, 0.5, 1, 1, 1, 0)

[sub_resource type="GradientTexture2D" id="GradientTexture2D_n8c0q"]
gradient = SubResource("Gradient_7r5wx")
fill_from = Vector2(0.5, 1)
fill_to = Vector2(0.5, 0)
metadata/_snap_enabled = true

[sub_resource type="StyleBoxTexture" id="StyleBoxTexture_io8ma"]
texture = ExtResource("4_n0ird")
texture_margin_left = 16.0
texture_margin_top = 16.0
texture_margin_right = 16.0
texture_margin_bottom = 16.0

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_p5aig"]
corner_radius_top_left = 2
corner_radius_top_right = 7
corner_radius_bottom_right = 7
corner_radius_bottom_left = 2
corner_detail = 1
anti_aliasing = false

[sub_resource type="Animation" id="Animation_p5aig"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("../..:modulate")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Color(1, 1, 1, 0)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("../../..:visible")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [true]
}

[sub_resource type="Animation" id="Animation_mcufe"]
resource_name = "next_appear"
length = 0.5
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("../..:modulate")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.2),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Color(1, 1, 1, 0), Color(1, 1, 1, 1)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("../../..:visible")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [true]
}

[sub_resource type="Animation" id="Animation_nnx0c"]
resource_name = "next_disappear"
length = 0.5
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("../..:modulate")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.2),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Color(1, 1, 1, 1), Color(1, 1, 1, 0)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("../../..:visible")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0.2),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_vk0xy"]
_data = {
&"RESET": SubResource("Animation_p5aig"),
&"next_appear": SubResource("Animation_mcufe"),
&"next_disappear": SubResource("Animation_nnx0c")
}

[node name="DialogSystem" type="CanvasLayer"]
process_mode = 3
script = ExtResource("1_2ocof")

[node name="DialogUI" type="Control" parent="."]
unique_name_in_owner = true
process_mode = 3
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2

[node name="TextureRect" type="TextureRect" parent="DialogUI"]
layout_mode = 1
anchors_preset = -1
anchor_top = 0.5
anchor_right = 1.0
anchor_bottom = 1.0
offset_top = -2.0
grow_horizontal = 2
grow_vertical = 2
size_flags_vertical = 3
mouse_filter = 2
texture = SubResource("GradientTexture2D_n8c0q")

[node name="VBoxContainer" type="VBoxContainer" parent="DialogUI"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2

[node name="VBoxContainer" type="VBoxContainer" parent="DialogUI/VBoxContainer"]
layout_mode = 2
size_flags_vertical = 3
size_flags_stretch_ratio = 1.2
mouse_filter = 2

[node name="HBoxContainer" type="HBoxContainer" parent="DialogUI/VBoxContainer/VBoxContainer"]
layout_mode = 2
size_flags_vertical = 3
mouse_filter = 2

[node name="Panel" type="Panel" parent="DialogUI/VBoxContainer/VBoxContainer/HBoxContainer"]
self_modulate = Color(1, 1, 1, 0)
custom_minimum_size = Vector2(100, 0)
layout_mode = 2
mouse_filter = 2

[node name="PortraitTextureRect" type="TextureRect" parent="DialogUI/VBoxContainer/VBoxContainer/HBoxContainer/Panel"]
unique_name_in_owner = true
custom_minimum_size = Vector2(100, 100)
layout_mode = 1
anchors_preset = -1
anchor_left = 0.62
anchor_top = 1.023
anchor_right = 0.62
anchor_bottom = 1.023
offset_left = -50.0
offset_top = -100.002
offset_right = 50.0
offset_bottom = -0.0019989014
grow_horizontal = 2
grow_vertical = 0
mouse_filter = 2

[node name="MarginContainer" type="MarginContainer" parent="DialogUI/VBoxContainer/VBoxContainer/HBoxContainer"]
layout_mode = 2
mouse_filter = 2
theme_override_constants/margin_left = 10

[node name="NameLabel" type="Label" parent="DialogUI/VBoxContainer/VBoxContainer/HBoxContainer/MarginContainer"]
unique_name_in_owner = true
layout_mode = 2
size_flags_vertical = 8
theme_override_colors/font_color = Color(1, 1, 1, 1)
theme_override_colors/font_outline_color = Color(0, 0, 0, 1)
theme_override_constants/outline_size = 5
theme_override_fonts/font = ExtResource("3_w6a2r")

[node name="MarginContainer" type="MarginContainer" parent="DialogUI/VBoxContainer"]
layout_mode = 2
size_flags_vertical = 3
mouse_filter = 2
theme_override_constants/margin_left = 10
theme_override_constants/margin_right = 10
theme_override_constants/margin_bottom = 10

[node name="VBoxContainer" type="VBoxContainer" parent="DialogUI/VBoxContainer/MarginContainer"]
layout_mode = 2
size_flags_horizontal = 3
mouse_filter = 2

[node name="PanelContainer" type="PanelContainer" parent="DialogUI/VBoxContainer/MarginContainer/VBoxContainer"]
self_modulate = Color(0, 0, 0, 0.75000006)
layout_mode = 2
size_flags_vertical = 3
mouse_filter = 2
theme_override_styles/panel = SubResource("StyleBoxTexture_io8ma")

[node name="ContentRichTextLabel" type="RichTextLabel" parent="DialogUI/VBoxContainer/MarginContainer/VBoxContainer/PanelContainer"]
unique_name_in_owner = true
layout_mode = 2
mouse_filter = 2
theme_override_colors/default_color = Color(0.65882355, 0.65882355, 0.65882355, 1)
theme_override_constants/line_separation = 4
theme_override_constants/paragraph_separation = -16
theme_override_fonts/normal_font = ExtResource("5_euafu")
theme_override_fonts/bold_font = ExtResource("3_w6a2r")
bbcode_enabled = true
text = "TEST TEST TEST TEST TEST TEST TEST TEST TEST TEST [br]
TEST TEST TEST TEST TEST TEST TEST "

[node name="ProgressMarginContainer" type="MarginContainer" parent="DialogUI"]
unique_name_in_owner = true
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
theme_override_constants/margin_right = 20
theme_override_constants/margin_bottom = 15

[node name="DialogProgressIndicator" type="PanelContainer" parent="DialogUI/ProgressMarginContainer"]
modulate = Color(1, 1, 1, 0)
custom_minimum_size = Vector2(36, 20)
layout_mode = 2
size_flags_horizontal = 8
size_flags_vertical = 8
mouse_filter = 2
theme_override_styles/panel = SubResource("StyleBoxFlat_p5aig")

[node name="MarginContainer" type="MarginContainer" parent="DialogUI/ProgressMarginContainer/DialogProgressIndicator"]
layout_mode = 2
mouse_filter = 2
theme_override_constants/margin_left = 1
theme_override_constants/margin_top = 2
theme_override_constants/margin_right = 2
theme_override_constants/margin_bottom = 2

[node name="ProgressLabel" type="RichTextLabel" parent="DialogUI/ProgressMarginContainer/DialogProgressIndicator/MarginContainer"]
unique_name_in_owner = true
layout_mode = 2
mouse_filter = 2
theme_override_fonts/normal_font = ExtResource("6_0uvkt")
bbcode_enabled = true
text = "[wave]NEXT[/wave]"

[node name="Timer" type="Timer" parent="."]
unique_name_in_owner = true
one_shot = true

[node name="AudioStreamPlayer" type="AudioStreamPlayer" parent="."]
unique_name_in_owner = true
max_polyphony = 6
bus = &"Dialog"

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
unique_name_in_owner = true
root_node = NodePath("../DialogUI/ProgressMarginContainer/DialogProgressIndicator/MarginContainer/ProgressLabel")
libraries = {
&"": SubResource("AnimationLibrary_vk0xy")
}
